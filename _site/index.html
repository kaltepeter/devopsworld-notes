<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>DevOps/Jenkins World 2018 | devopsworld-notes</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="DevOps/Jenkins World 2018" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="my notes from devopsworld/jenkinsworld 2018" />
<meta property="og:description" content="my notes from devopsworld/jenkinsworld 2018" />
<link rel="canonical" href="http://0.0.0.0:4000/" />
<meta property="og:url" content="http://0.0.0.0:4000/" />
<meta property="og:site_name" content="devopsworld-notes" />
<script type="application/ld+json">
{"description":"my notes from devopsworld/jenkinsworld 2018","headline":"DevOps/Jenkins World 2018","@type":"WebSite","url":"http://0.0.0.0:4000/","name":"devopsworld-notes","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=">
  </head>
  <body>
    <div class="container-lg px-3 my-5 markdown-body">
      
      <h1><a href="http://0.0.0.0:4000/">devopsworld-notes</a></h1>
      

      <h1 id="devopsjenkins-world-2018">DevOps/Jenkins World 2018</h1>

<h3 id="httpsdevopsworldjenkinsworld2018schedcom">https://devopsworldjenkinsworld2018.sched.com</h3>
<p><a href="https://twitter.com/devopsworldconf">@devopsworldconf</a></p>

<!-- .slide: data-transition="zoom" -->

<hr />
<h4 id="workshop-cloudbees-core">workshop: cloudbees core</h4>
<p><a href="https://github.com/cloudbees-cd-acceleration-workshop/cloudbees-cd-acceleration-workshop-exercises">github/cloudbees-cd-acceleration-workshop</a>
<a href="https://github.com/kayla-cb-ws">github/kayla-cb-ws</a></p>

<p>was Jenkins Enterprise 1.x now Cloudbees Core
https://go.cloudbees.com/downloads/
https://www.cloudbees.com/products/cloudbees-core
<!-- .slide: data-transition="convex" -->
—</p>
<h4 id="custom-marker-file">custom marker file</h4>
<p>https://github.com/kayla-cb-ws/helloworld-nodejs</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>.node-app
</code></pre></div></div>
<p>https://github.com/kayla-cb-ws/custom-marker-pipelines</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nodejs-app
└── Jenkinsfile.template
</code></pre></div></div>
<ul>
  <li>Can be any file, can contain properties.</li>
  <li>can be any file, even an app file like pom.xml</li>
  <li>can be ordered list, e.g. .node-app or Jenkinsfile</li>
</ul>

<p><a href="https://github.com/cloudbees-cd-acceleration-workshop/cloudbees-cd-acceleration-workshop-exercises/blob/master/exercises/intro-pipeline-cb-core.md#project-recognizers-with-custom-marker-files">custom-marker-files-setup</a>
<!-- .slide: data-transition="convex" -->
—</p>
<h4 id="stashunstash">stash/unstash</h4>
<ul>
  <li>very useful for multi-agent builds</li>
  <li>introduces a lot of network I/O to master</li>
  <li>pluggable storage like https://github.com/jenkinsci/artifact-manager-s3-plugin really helps performance</li>
  <li>enables restarting from stages (with preserveStashes)</li>
</ul>

<p><a href="https://github.com/cloudbees-cd-acceleration-workshop/cloudbees-cd-acceleration-workshop-exercises/blob/master/exercises/approvals-artifacts-cb-core.md#stash-and-unstash">approvals-artifacts-cb-core.md#stash-and-unstash</a>
<!-- .slide: data-transition="convex" -->
—</p>
<h4 id="parallel-vs-sequential-stages">parallel vs. sequential stages</h4>
<blockquote>
  <p>We are duplicating the agent section and the post sections for capturing test results with the junit step. We are also executing the nodejs steps twice. That doesn’t seem efficient - but it is because the parallel block for Declarative syntax does not allow you to define an agent section and a parallel block at the same level. More specifically, you can have ONLY ONE of either agent, parallel or stages as a child of the stage directive.</p>
</blockquote>

<p>–</p>
<blockquote>
  <h2 id="what-we-really-want-to-do-in-the-test-stage-is-set-up-the-helloworld-nodejs-just-once---to-incluce-only-running-one-kubernetes-pod-we-want-to-define-the-agent-once-for-the-entire-test-stage-and-then-run-the-nodejs-container-block-once-but-in-the-same-workspace-as-what-will-be-used-by-the-testcafe-containers-and-we-want-to-capture-all-of-the-test-results-unfortunatley-this-is-not-possible-with-delcarative-syntax---but-it-would-be-possible-with-scripted-syntax">What we really want to do in the Test stage is set-up the helloworld-nodejs just once - to incluce only running one Kubernetes Pod. We want to define the agent once for the entire Test stage, and then run the nodejs container block once but in the same workspace as what will be used by the testcafe containers. And we want to capture all of the test results. Unfortunatley this is not possible with Delcarative syntax - but it would be possible with scripted syntax.</h2>
</blockquote>

<ul>
  <li>parallel can be slower, I/O bottlenecks</li>
  <li>parallel only works with separate containers</li>
  <li>if done correctly parallel can improve performance</li>
  <li>declartive is limited with parallel</li>
</ul>

<p>https://github.com/cloudbees-cd-acceleration-workshop/cloudbees-cd-acceleration-workshop-exercises/blob/master/exercises/parallel-sequential-cb-core.md
<!-- .slide: data-transition="convex" -->
—</p>
<h4 id="shared-libraries">shared libraries</h4>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// vars/defineProps.groovy</span>
<span class="kt">def</span> <span class="nf">call</span><span class="o">(</span><span class="n">String</span> <span class="n">file</span><span class="o">,</span> <span class="n">Map</span> <span class="n">defaults</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">//use the Pipeline Utility Steps plugin readProperties step to read the file</span>
  <span class="kt">def</span> <span class="n">props</span> <span class="o">=</span> <span class="n">readProperties</span> <span class="nl">defaults:</span> <span class="n">defaults</span><span class="o">,</span> <span class="nl">file:</span> <span class="n">file</span>
  <span class="k">for</span> <span class="o">(</span> <span class="n">e</span> <span class="k">in</span> <span class="n">props</span> <span class="o">)</span> <span class="o">{</span>
    <span class="n">env</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">key</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">value</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="the-first-comment-may-serve-a-purpose">The first comment may serve a purpose</h2>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2&gt;</span>defineProps step<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>
A custom step for using the <span class="nt">&lt;pre&gt;</span>readProperties<span class="nt">&lt;/pre&gt;</span> step from the Pipeline Utilities plugin specifically from a Declarative Pipeline. 
<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;h3&gt;</span>Configuration<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;dl&gt;</span>
	<span class="nt">&lt;dt&gt;</span>name<span class="nt">&lt;/dt&gt;</span>
	<span class="nt">&lt;dd&gt;&lt;pre&gt;</span>String<span class="nt">&lt;/pre&gt;&lt;b&gt;</span>REQUIRED<span class="nt">&lt;/b&gt;</span> the file, including path, to be read from the workspace as the properties file<span class="nt">&lt;/dd&gt;</span>
	<span class="nt">&lt;dt&gt;</span>defaults<span class="nt">&lt;/dt&gt;</span>
	<span class="nt">&lt;dd&gt;&lt;pre&gt;</span>Map<span class="nt">&lt;/pre&gt;&lt;b&gt;</span>OPTIONAL<span class="nt">&lt;/b&gt;</span> default values for passed in properties file<span class="nt">&lt;/dd&gt;</span>
<span class="nt">&lt;/dl&gt;</span>

<span class="nt">&lt;h3&gt;</span>Example:<span class="nt">&lt;/h3&gt;</span>
<span class="nt">&lt;pre&gt;</span>
	defineProps('.nodejs-app', [npmPackages: 'express pug'])
<span class="nt">&lt;/pre&gt;</span>
</code></pre></div></div>

<h2 id="provides-documentation-to-the-syntax-generators">provides documentation to the syntax generators</h2>
<p>syntax matters</p>

<p>branch override</p>
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span> <span class="s1">'cd-accel@completed'</span>
<span class="n">library</span> <span class="s1">'cd-accel'</span>
</code></pre></div></div>
<p>import everything</p>
<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Library</span><span class="o">(</span><span class="s1">'cd-accel'</span><span class="o">)</span> <span class="n">_</span>
</code></pre></div></div>
<p>–</p>
<ul>
  <li>wildcard is expensive. it will load entire repo everytime</li>
  <li>wildcard breaks replay</li>
  <li>no wildcard with explicit imports is light</li>
</ul>

<p>https://github.com/cloudbees-cd-acceleration-workshop/cloudbees-cd-acceleration-workshop-exercises/blob/master/exercises/advanced-pipeline-cb-core.md#pipeline-shared-libraries
<!-- .slide: data-transition="convex" -->
—</p>
<h4 id="custom-listeners">custom listeners</h4>

<div class="language-groovy highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">triggers</span> <span class="o">{</span>
    <span class="n">eventTrigger</span> <span class="nf">simpleMatch</span><span class="o">(</span><span class="s1">'hello-api-push-event'</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div></div>
<p>event listens for a job/event to fire</p>

<p><a href="https://github.com/cloudbees-cd-acceleration-workshop/cloudbees-cd-acceleration-workshop-exercises/blob/master/exercises/advanced-pipeline-cb-core.md#cross-team-collaboration">advanced-pipeline-cb-core.md#cross-team-collaboration</a></p>

<p>https://go.cloudbees.com/docs/cloudbees-core/cloud-admin-guide/cross-team-collaboration/</p>

<!-- .slide: data-transition="convex" -->
<hr />
<p><a href="https://www.slideshare.net/rheinwein/using-docker-for-development"><img src="https://github.com/kaltepeter/devopsworld-notes/raw/master/slides/images/jenkinsworlddevopsworld-docker_for_dev.png" alt="Docker for Development" /></a></p>

<!-- .slide: data-transition="convex" -->
<hr />

<!-- .slide: data-transition="convex" -->
<hr />

<h6 id="5-essential-characteristics-nist">5 Essential Characteristics (NIST)</h6>
<p><img src="https://github.com/kaltepeter/devopsworld-notes/raw/master/slides/images/slide-cloud.jpg" alt="5 essential characteristics (NIST)" /></p>

<!-- .slide: data-transition="convex" -->
<hr />
<p><a href="https://www.amazon.com/Accelerate-Software-Performing-Technology-Organizations/dp/1942788339/ref=pd_lpo_sbs_14_t_0?_encoding=UTF8&amp;psc=1&amp;refRID=NJD8PNXHAKKDE2BPQ45P"><img src="https://github.com/kaltepeter/devopsworld-notes/raw/master/slides/images/accelerate-book.png" alt="Accelerate" /></a>
<!-- .slide: data-transition="onvex" -->
—</p>

<h2 id="dr-nicole-forsgren-keynote">Dr. Nicole Forsgren Keynote</h2>
<p><a href="https://www.youtube-nocookie.com/embed/R9izKUqPCiU?start=1019" title="Devops/JenkinsWorld Closing Keynote"><img src="https://github.com/kaltepeter/devopsworld-notes/raw/master/slides/images/R9izKUqPCiU.png" alt="Dr. Nicole Forsgren" /></a></p>

<hr />


      
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.0/anchor.min.js" integrity="sha256-lZaRhKri35AyJSypXXs4o6OPFTbTmUoltBbDCbdzegg=" crossorigin="anonymous"></script>
    <script>anchors.add();</script>
    
  </body>
</html>
